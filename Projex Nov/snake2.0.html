<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        #canvas-container {
            position: relative;
        }
        #canvas {
            border: 1px solid black;
        }
        #scoreboard {
            position: absolute;
            top: 10px;
            right: 10px;
            font-family: Arial, sans-serif;
            font-size: 18px;
            color: white;
        }
    </style>
</head>
<body>
    <div id="canvas-container">
        <canvas id="canvas" width="690" height="690"></canvas>
        <div id="scoreboard">Score: <span id="score">0</span></div>
    </div>

    <script>
        let canvas = document.getElementById("canvas");
        let ctx = canvas.getContext('2d');

        let rows = 20;
        let cols = 20;
        let cellWidth = canvas.width / cols;
        let cellHeight = canvas.height / rows;

        let snake = [
            { x: 2, y: 3 },
            { x: 3, y: 3 },
            { x: 4, y: 3 },
            { x: 5, y: 3 }
        ];
        let direction = "RIGHT";
        let foodCollected = false;
        let score = 0;

        let food = { x: 5, y: 5 };

        setInterval(gameloop, 150);

        let canvasContainer = document.getElementById("canvas-container");
        canvasContainer.style.position = "absolute";
        canvasContainer.style.left = `${(window.innerWidth - canvas.width) / 2}px`;
        canvasContainer.style.top = `${(window.innerHeight - canvas.height) / 2}px`;

        document.addEventListener('keydown', onKeyDown);

        placeFood();
        draw();
        gameloop();

        function draw(){
            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = "green";
            snake.forEach(part => add(part.x, part.y));

            ctx.fillStyle = "yellow";
            add(food.x , food.y );

            document.getElementById("score").innerText = score;

            requestAnimationFrame(draw);
        }

        function gameloop(){
            if(foodCollected == true){
                snake = [{
                    x: snake[0].x,
                    y: snake[0].y
                }, ...snake];

                foodCollected = false;
            }

            for(let i = snake.length - 1; i > 0; i--) {
                snake[i].x = snake[i - 1].x;
                snake[i].y = snake[i - 1].y;
            }

            if (direction == "LEFT" && !(snake[0].x === snake[1].x + 1)) {
                snake[0].x--;
                if(snake[0].x < 0){
                    snake[0].x = cols - 1;
                }
            } else if(direction == "UP" && !(snake[0].y === snake[1].y + 1)){
                snake[0].y--;
                if(snake[0].y < 0){
                    snake[0].y = rows - 1;
                }
            } else if(direction == "RIGHT" && !(snake[0].x === snake[1].x - 1)){
                snake[0].x++;
                if(snake[0].x >= cols){
                    snake[0].x = 0;
                }
            } else if(direction == "DOWN" && !(snake[0].y === snake[1].y - 1)){
                snake[0].y++;
                if(snake[0].y >= rows){
                    snake[0].y = 0;
                }
            }

            if(snake[0].x == food.x && snake[0].y == food.y){
                placeFood();
                foodCollected = true;
                score += 1;
            }
        }

        function add(x, y){
            ctx.fillRect(x * cellWidth, y * cellHeight, cellWidth - 1, cellHeight - 1);
        }

        function placeFood() {
            let randomX = Math.floor(Math.random() * cols);
            let randomY = Math.floor(Math.random() * rows);

            food.x = randomX;
            food.y = randomY;
        }

        function onKeyDown(event){
            if (event.keyCode === 65 || event.keyCode === 37){
                if (direction !== "RIGHT") direction = "LEFT";
            }
            if (event.keyCode === 87 || event.keyCode === 38){
                if (direction !== "DOWN") direction = "UP";
            }
            if (event.keyCode === 68 || event.keyCode === 39){
                if (direction !== "LEFT") direction = "RIGHT";
            }
            if (event.keyCode === 83 || event.keyCode === 40){
                if (direction !== "UP") direction = "DOWN";
            }
        }
    </script>
</body>
</html>
